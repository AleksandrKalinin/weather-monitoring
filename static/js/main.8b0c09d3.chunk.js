(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){e.exports=a(285)},147:function(e,t,a){},148:function(e,t,a){},285:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(32),c=a.n(s),i=(a(146),a(147),a(148),a(119)),l=a(120),o=a(131),m=a(121),u=a(132),h=a(294),d=a(286),p=a(296),w=a(295),g=a(23),E=a.n(g),f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).updateSearch=function(e){a.setState({search:e.target.value})},a.defaultWeather=function(){var e=a.fetchData();a.setState({isVisible:!0,timestrSunrise:e.timestrSunrise,timestrSunset:e.timestrSunset,iconCode:e.iconCode,iconUrl:e.iconUrl,time:e.forecast,forecast:e.newForecast})},a.fetchData=function(){var e=a.state.weather.weather[0].icon,t="https://openweathermap.org/img/w/"+e+".png",r=a.state.weather.sys.sunrise,n=a.state.weather.sys.sunset,s=new Date(1e3*r).toLocaleTimeString(),c=new Date(1e3*n).toLocaleTimeString(),i=a.state.forecast.list.slice(),l=[],o={};i.map(function(e,t){var a=new Date(1e3*e.dt),r=a.getHours(),n="0"+a.getMinutes(),s="0"+a.getSeconds(),c=a.getDate(),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()],l=r+":"+n.substr(-2)+":"+s.substr(-2);e.dt=l,e.weekday=i,e.day=c});for(var m=0;m<i.length;m+=8){var u="https://openweathermap.org/img/w/"+i[m].weather[0].icon+".png";o.formattedTime=i[m].dt,o.weekday=i[m].weekday,o.day=i[m].day,o.temp=i[m].main.temp,o.max=i[m].main.temp_max,o.min=i[m].main.temp_min,o.currentName=i[m].weather[0].main,o.currentDescription=i[m].weather[0].description,o.icon=u,o.wind=i[m].wind.speed,l.push(o),o={}}var h=a.state.weather.weather[0].main;console.log(h);document.getElementById("root-wrapper");return"Clouds"==h?a.setState({currentBackground:"cloudy.jpg"}):"Rain"==h||"Drizzle"==h?a.setState({currentBackground:"rainy.jpg"}):"Snow"==h?a.setState({currentBackground:"snowy.jpg"}):"Mist"==h?a.setState({currentBackground:"misty.jpg"}):a.setState({currentBackground:"sunny.jpg"}),{timestrSunrise:s,timestrSunset:c,iconCode:e,iconUrl:t,forecast:i,newForecast:l}},a.fetchInputData=function(){a.setState({isVisible:!1,isFetching:!0});var e=a.state.search,t="https://api.openweathermap.org/data/2.5/weather?appid=".concat(a.state.API_KEY),r="https://api.openweathermap.org/data/2.5/forecast?appid=".concat(a.state.API_KEY),n="".concat(t,"&q=").concat(e,"&units=metric"),s="".concat(r,"&q=").concat(e,"&units=metric");E.a.all([E.a.get(n),E.a.get(s)]).then(E.a.spread(function(e,t){a.setState({weather:e.data,forecast:t.data},function(){return a.fetchForecast()})})).catch(function(e){a.setState({isFailed:!0,isFetching:!1,isVisible:!1})})},a.fetchForecast=function(){var e=a.fetchData();console.log(e),a.setState({isVisible:!0,isFailed:!1,isFetching:!1,timestrSunrise:e.timestrSunrise,timestrSunset:e.timestrSunset,iconCode:e.iconCode,iconUrl:e.iconUrl,time:e.forecast,forecast:e.newForecast,search:""})},a.handleKeyPress=function(e){13===e.charCode&&(a.fetchInputData(),a.setState({search:""}))},a.state={API_KEY:"a5821f4600801be4a4ebefc0a0a643ba",weather:[],search:"",latitude:null,longitude:null,isVisible:!1,isFetching:!1,isFailed:!1,timestrSunset:null,timestrSunrise:null,iconCode:null,iconUrl:null,forecast:[],time:[],currentBackground:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.setState({latitude:t.coords.latitude,longitude:t.coords.longitude});var a=e.state.latitude,r=e.state.longitude,n="https://api.openweathermap.org/data/2.5/weather?appid=".concat(e.state.API_KEY),s="https://api.openweathermap.org/data/2.5/forecast?appid=".concat(e.state.API_KEY),c="".concat(n,"&lat=").concat(a,"&lon=").concat(r,"&units=metric"),i="".concat(s,"&lat=").concat(a,"&lon=").concat(r,"&units=metric");E.a.all([E.a.get(c),E.a.get(i)]).then(E.a.spread(function(t,a){var r=t.data,n=a.data;e.setState({weather:r,forecast:n},function(){return e.defaultWeather()})}))}):alert("Geolocation is not supported by this browser.")}},{key:"render",value:function(){return n.a.createElement(r.Fragment,null,n.a.createElement("div",{id:"root-image"},n.a.createElement("img",{src:this.state.currentBackground})),n.a.createElement("div",{id:"root-wrapper"},n.a.createElement("div",{className:"input-wrapper"},n.a.createElement(h.a,{value:this.state.search,placeholder:"search for city",onKeyPress:this.handleKeyPress,className:"main-input",onChange:this.updateSearch}),n.a.createElement(d.a,{onClick:this.fetchInputData,primary:!0},"Search")),this.state.isVisible?n.a.createElement(r.Fragment,null,n.a.createElement(p.a,{divided:!0,className:"weather-wrapper"},n.a.createElement(p.a.Row,{columns:2,className:"top-row"},n.a.createElement(p.a.Column,{className:"column-header"},n.a.createElement("h1",null,this.state.weather.main.temp,"\xb0 ")),n.a.createElement(p.a.Column,{className:"column-header"},n.a.createElement("h2",null,this.state.weather.name,", ",this.state.weather.sys.country))),n.a.createElement(p.a.Row,{columns:4,className:"weather-row"},n.a.createElement(p.a.Column,{className:"weather-column"},n.a.createElement("h4",{className:"weather-header"},this.state.weather.main.temp_min,"\xb0 / ",this.state.weather.main.temp_max,"\xb0 "),n.a.createElement("p",{className:"weather-descr"},"High / Low")),n.a.createElement(p.a.Column,{className:"weather-column"},n.a.createElement("h4",{className:"weather-header"},this.state.weather.main.temp,"\xb0 "),n.a.createElement("p",{className:"weather-descr"},"Feels like")),n.a.createElement(p.a.Column,{className:"weather-column"},n.a.createElement("h4",{className:"weather-header"},this.state.timestrSunrise),n.a.createElement("p",{className:"weather-descr"},"Sunrise")),n.a.createElement(p.a.Column,{className:"weather-column"},n.a.createElement("h4",{className:"weather-header"},this.state.timestrSunset),n.a.createElement("p",{className:"weather-descr"},"Sunset"))),n.a.createElement(p.a.Row,{columns:4,className:"weather-row"},n.a.createElement(p.a.Column,{className:"weather-column"},n.a.createElement("h4",{className:"weather-header"},this.state.weather.weather[0].main," ",n.a.createElement("img",{src:this.state.iconUrl})),n.a.createElement("p",{className:"weather-descr"},"Current condition")),n.a.createElement(p.a.Column,{className:"weather-column"},n.a.createElement("h4",{className:"weather-header"},this.state.weather.main.pressure," hpa"),n.a.createElement("p",{className:"weather-descr"},"Pressure")),n.a.createElement(p.a.Column,{className:"weather-column"},n.a.createElement("h4",{className:"weather-header"},this.state.weather.main.humidity),n.a.createElement("p",{className:"weather-descr"},"Humidity")),n.a.createElement(p.a.Column,{className:"weather-column"},n.a.createElement("h4",{className:"weather-header"},this.state.weather.wind.speed," m/s"),n.a.createElement("p",{className:"weather-descr"},"Wind"))),n.a.createElement(p.a.Row,{columns:1},n.a.createElement(p.a.Column,null,n.a.createElement("p",{className:"weather-descr"},"Today: ",(new Date).toLocaleDateString())))),n.a.createElement(w.a.Group,{itemsPerRow:5,className:"forecast-wrapper"},this.state.forecast.map(function(e,t){return n.a.createElement(w.a,{key:t},n.a.createElement(w.a.Content,{className:"header-wrapper"},n.a.createElement(w.a.Header,null,e.weekday,", ",e.day," ")),n.a.createElement(w.a.Content,{className:"icon-wrapper"},n.a.createElement("img",{src:e.icon})),n.a.createElement(w.a.Content,{className:"icon-description"},n.a.createElement("h4",null,e.max," / ",e.min),n.a.createElement("p",null,e.currentName," (",e.currentDescription,")"),n.a.createElement("p",null,"Wind speed: ",e.wind," m/s")))}))):null,this.state.isFetching?n.a.createElement(p.a,{divided:!0,className:"weather-wrapper fetching-wrapper"},"Fetching..."):null,this.state.isFailed?n.a.createElement(p.a,{divided:!0,className:"weather-wrapper fetching-wrapper"},"Sorry, the request failed. Try one more time"):null))}}]),t}(r.Component);c.a.render(n.a.createElement(f,null),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.8b0c09d3.chunk.js.map